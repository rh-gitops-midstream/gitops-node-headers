"use strict";var path=require("path"),fs=require("fs"),module$1=require("module");function _interopDefaultLegacy(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var path__default=_interopDefaultLegacy(path),fs__default=_interopDefaultLegacy(fs);function slash(r){const i=/^\\\\\?\\/.test(r),a=/[^\u0000-\u0080]+/.test(r);return i||a?r:r.replace(/\\/g,"/")}function findConfigFile(r,i){for(;;){const a=path__default.default.join(r,i);if(fs__default.default.existsSync(a))return slash(a);const e=path__default.default.dirname(r);if(e===r)return;r=e}}var require$1=require;function createScanner(r,i){i===void 0&&(i=!1);var a=r.length,e=0,o="",l=0,n=16,f=0,s=0,C=0,p=0,d=0;function O(t,b){for(var k=0,h=0;k<t||!b;){var g=r.charCodeAt(e);if(g>=48&&g<=57)h=h*16+g-48;else if(g>=65&&g<=70)h=h*16+g-65+10;else if(g>=97&&g<=102)h=h*16+g-97+10;else break;e++,k++}return k<t&&(h=-1),h}function S(t){e=t,o="",l=0,n=16,d=0}function _(){var t=e;if(r.charCodeAt(e)===48)e++;else for(e++;e<r.length&&isDigit(r.charCodeAt(e));)e++;if(e<r.length&&r.charCodeAt(e)===46)if(e++,e<r.length&&isDigit(r.charCodeAt(e)))for(e++;e<r.length&&isDigit(r.charCodeAt(e));)e++;else return d=3,r.substring(t,e);var b=e;if(e<r.length&&(r.charCodeAt(e)===69||r.charCodeAt(e)===101))if(e++,(e<r.length&&r.charCodeAt(e)===43||r.charCodeAt(e)===45)&&e++,e<r.length&&isDigit(r.charCodeAt(e))){for(e++;e<r.length&&isDigit(r.charCodeAt(e));)e++;b=e}else d=3;return r.substring(t,b)}function T(){for(var t="",b=e;;){if(e>=a){t+=r.substring(b,e),d=2;break}var k=r.charCodeAt(e);if(k===34){t+=r.substring(b,e),e++;break}if(k===92){if(t+=r.substring(b,e),e++,e>=a){d=2;break}var h=r.charCodeAt(e++);switch(h){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+=`
`;break;case 114:t+="\r";break;case 116:t+="	";break;case 117:var g=O(4,!0);g>=0?t+=String.fromCharCode(g):d=4;break;default:d=5}b=e;continue}if(k>=0&&k<=31)if(isLineBreak(k)){t+=r.substring(b,e),d=2;break}else d=6;e++}return t}function w(){if(o="",d=0,l=e,s=f,p=C,e>=a)return l=a,n=17;var t=r.charCodeAt(e);if(isWhiteSpace(t)){do e++,o+=String.fromCharCode(t),t=r.charCodeAt(e);while(isWhiteSpace(t));return n=15}if(isLineBreak(t))return e++,o+=String.fromCharCode(t),t===13&&r.charCodeAt(e)===10&&(e++,o+=`
`),f++,C=e,n=14;switch(t){case 123:return e++,n=1;case 125:return e++,n=2;case 91:return e++,n=3;case 93:return e++,n=4;case 58:return e++,n=6;case 44:return e++,n=5;case 34:return e++,o=T(),n=10;case 47:var b=e-1;if(r.charCodeAt(e+1)===47){for(e+=2;e<a&&!isLineBreak(r.charCodeAt(e));)e++;return o=r.substring(b,e),n=12}if(r.charCodeAt(e+1)===42){e+=2;for(var k=a-1,h=!1;e<k;){var g=r.charCodeAt(e);if(g===42&&r.charCodeAt(e+1)===47){e+=2,h=!0;break}e++,isLineBreak(g)&&(g===13&&r.charCodeAt(e)===10&&e++,f++,C=e)}return h||(e++,d=1),o=r.substring(b,e),n=13}return o+=String.fromCharCode(t),e++,n=16;case 45:if(o+=String.fromCharCode(t),e++,e===a||!isDigit(r.charCodeAt(e)))return n=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=_(),n=11;default:for(;e<a&&m(t);)e++,t=r.charCodeAt(e);if(l!==e){switch(o=r.substring(l,e),o){case"true":return n=8;case"false":return n=9;case"null":return n=7}return n=16}return o+=String.fromCharCode(t),e++,n=16}}function m(t){if(isWhiteSpace(t)||isLineBreak(t))return!1;switch(t){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function u(){var t;do t=w();while(t>=12&&t<=15);return t}return{setPosition:S,getPosition:function(){return e},scan:i?u:w,getToken:function(){return n},getTokenValue:function(){return o},getTokenOffset:function(){return l},getTokenLength:function(){return e-l},getTokenStartLine:function(){return s},getTokenStartCharacter:function(){return l-p},getTokenError:function(){return d}}}function isWhiteSpace(r){return r===32||r===9||r===11||r===12||r===160||r===5760||r>=8192&&r<=8203||r===8239||r===8287||r===12288||r===65279}function isLineBreak(r){return r===10||r===13||r===8232||r===8233}function isDigit(r){return r>=48&&r<=57}var ParseOptions;(function(r){r.DEFAULT={allowTrailingComma:!1}})(ParseOptions||(ParseOptions={}));function parse$1(r,i,a){i===void 0&&(i=[]),a===void 0&&(a=ParseOptions.DEFAULT);var e=null,o=[],l=[];function n(s){Array.isArray(o)?o.push(s):e!==null&&(o[e]=s)}var f={onObjectBegin:function(){var s={};n(s),l.push(o),o=s,e=null},onObjectProperty:function(s){e=s},onObjectEnd:function(){o=l.pop()},onArrayBegin:function(){var s=[];n(s),l.push(o),o=s,e=null},onArrayEnd:function(){o=l.pop()},onLiteralValue:n,onError:function(s,C,p){i.push({error:s,offset:C,length:p})}};return visit(r,f,a),o[0]}function visit(r,i,a){a===void 0&&(a=ParseOptions.DEFAULT);var e=createScanner(r,!1);function o(c){return c?function(){return c(e.getTokenOffset(),e.getTokenLength(),e.getTokenStartLine(),e.getTokenStartCharacter())}:function(){return!0}}function l(c){return c?function(v){return c(v,e.getTokenOffset(),e.getTokenLength(),e.getTokenStartLine(),e.getTokenStartCharacter())}:function(){return!0}}var n=o(i.onObjectBegin),f=l(i.onObjectProperty),s=o(i.onObjectEnd),C=o(i.onArrayBegin),p=o(i.onArrayEnd),d=l(i.onLiteralValue),O=l(i.onSeparator),S=o(i.onComment),_=l(i.onError),T=a&&a.disallowComments,w=a&&a.allowTrailingComma;function m(){for(;;){var c=e.scan();switch(e.getTokenError()){case 4:u(14);break;case 5:u(15);break;case 3:u(13);break;case 1:T||u(11);break;case 2:u(12);break;case 6:u(16);break}switch(c){case 12:case 13:T?u(10):S();break;case 16:u(1);break;case 15:case 14:break;default:return c}}}function u(c,v,A){if(v===void 0&&(v=[]),A===void 0&&(A=[]),_(c),v.length+A.length>0)for(var y=e.getToken();y!==17;){if(v.indexOf(y)!==-1){m();break}else if(A.indexOf(y)!==-1)break;y=m()}}function t(c){var v=e.getTokenValue();return c?d(v):f(v),m(),!0}function b(){switch(e.getToken()){case 11:var c=e.getTokenValue(),v=Number(c);isNaN(v)&&(u(2),v=0),d(v);break;case 7:d(null);break;case 8:d(!0);break;case 9:d(!1);break;default:return!1}return m(),!0}function k(){return e.getToken()!==10?(u(3,[],[2,5]),!1):(t(!1),e.getToken()===6?(O(":"),m(),j()||u(4,[],[2,5])):u(5,[],[2,5]),!0)}function h(){n(),m();for(var c=!1;e.getToken()!==2&&e.getToken()!==17;){if(e.getToken()===5){if(c||u(4,[],[]),O(","),m(),e.getToken()===2&&w)break}else c&&u(6,[],[]);k()||u(4,[],[2,5]),c=!0}return s(),e.getToken()!==2?u(7,[2],[]):m(),!0}function g(){C(),m();for(var c=!1;e.getToken()!==4&&e.getToken()!==17;){if(e.getToken()===5){if(c||u(4,[],[]),O(","),m(),e.getToken()===4&&w)break}else c&&u(6,[],[]);j()||u(4,[],[4,5]),c=!0}return p(),e.getToken()!==4?u(8,[4],[]):m(),!0}function j(){switch(e.getToken()){case 3:return g();case 1:return h();case 10:return t(!0);default:return b()}}return m(),e.getToken()===17?a.allowEmptyContent?!0:(u(4,[],[]),!1):j()?(e.getToken()!==17&&u(9,[],[]),!0):(u(4,[],[]),!1)}var parse=parse$1;const normalizePath=r=>slash(/^[./]/.test(r)?r:`./${r}`);var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(r,i,a)=>i in r?__defProp(r,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[i]=a,__spreadValues=(r,i)=>{for(var a in i||(i={}))__hasOwnProp.call(i,a)&&__defNormalProp(r,a,i[a]);if(__getOwnPropSymbols)for(var a of __getOwnPropSymbols(i))__propIsEnum.call(i,a)&&__defNormalProp(r,a,i[a]);return r},__spreadProps=(r,i)=>__defProps(r,__getOwnPropDescs(i));function readTsconfig(r){var i,a;const e=fs__default.default.realpathSync(r),o=path__default.default.dirname(e),l=fs__default.default.readFileSync(r,"utf8").trim();let n={};if(l&&(n=parse(l),!n||typeof n!="object"))throw new SyntaxError(`Failed to parse JSON: ${r}`);if(n.extends){let f=n.extends;try{f=require$1.resolve(f,{paths:[path__default.default.dirname(r)]})}catch(p){if(p.code==="MODULE_NOT_FOUND")try{f=require$1.resolve(path__default.default.join(f,"tsconfig.json"),{paths:[path__default.default.dirname(r)]})}catch{}}const s=readTsconfig(f);if(delete s.references,(i=s.compilerOptions)!=null&&i.baseUrl){const{compilerOptions:p}=s;p.baseUrl=path__default.default.relative(o,path__default.default.join(path__default.default.dirname(f),p.baseUrl))}s.files&&(s.files=s.files.map(p=>path__default.default.relative(o,path__default.default.join(path__default.default.dirname(f),p)))),s.include&&(s.include=s.include.map(p=>path__default.default.relative(o,path__default.default.join(path__default.default.dirname(f),p)))),delete n.extends;const C=__spreadProps(__spreadValues(__spreadValues({},s),n),{compilerOptions:__spreadValues(__spreadValues({},s.compilerOptions),n.compilerOptions)});s.watchOptions&&(C.watchOptions=__spreadValues(__spreadValues({},s.watchOptions),n.watchOptions)),n=C}if((a=n.compilerOptions)!=null&&a.baseUrl){const{compilerOptions:f}=n;f.baseUrl=normalizePath(f.baseUrl)}if(n.files&&(n.files=n.files.map(normalizePath)),n.include&&(n.include=n.include.map(slash)),n.watchOptions){const{watchOptions:f}=n;f.excludeDirectories&&(f.excludeDirectories=f.excludeDirectories.map(s=>slash(path__default.default.resolve(o,s))))}return n}function getTsconfig(r=process.cwd(),i="tsconfig.json"){const a=findConfigFile(r,i);if(!a)return null;const e=readTsconfig(a);return{path:a,config:e}}module.exports=getTsconfig;
