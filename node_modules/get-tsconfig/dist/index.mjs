import p from"path";import B from"fs";import{createRequire as z}from"module";function P(r){const i=/^\\\\\?\\/.test(r),a=/[^\u0000-\u0080]+/.test(r);return i||a?r:r.replace(/\\/g,"/")}function H(r,i){for(;;){const a=p.join(r,i);if(B.existsSync(a))return P(a);const e=p.dirname(r);if(e===r)return;r=e}}var U=z(import.meta.url);function J(r,i){i===void 0&&(i=!1);var a=r.length,e=0,o="",l=0,n=16,f=0,s=0,O=0,b=0,d=0;function A(t,k){for(var v=0,m=0;v<t||!k;){var g=r.charCodeAt(e);if(g>=48&&g<=57)m=m*16+g-48;else if(g>=65&&g<=70)m=m*16+g-65+10;else if(g>=97&&g<=102)m=m*16+g-97+10;else break;e++,v++}return v<t&&(m=-1),m}function N(t){e=t,o="",l=0,n=16,d=0}function D(){var t=e;if(r.charCodeAt(e)===48)e++;else for(e++;e<r.length&&w(r.charCodeAt(e));)e++;if(e<r.length&&r.charCodeAt(e)===46)if(e++,e<r.length&&w(r.charCodeAt(e)))for(e++;e<r.length&&w(r.charCodeAt(e));)e++;else return d=3,r.substring(t,e);var k=e;if(e<r.length&&(r.charCodeAt(e)===69||r.charCodeAt(e)===101))if(e++,(e<r.length&&r.charCodeAt(e)===43||r.charCodeAt(e)===45)&&e++,e<r.length&&w(r.charCodeAt(e))){for(e++;e<r.length&&w(r.charCodeAt(e));)e++;k=e}else d=3;return r.substring(t,k)}function j(){for(var t="",k=e;;){if(e>=a){t+=r.substring(k,e),d=2;break}var v=r.charCodeAt(e);if(v===34){t+=r.substring(k,e),e++;break}if(v===92){if(t+=r.substring(k,e),e++,e>=a){d=2;break}var m=r.charCodeAt(e++);switch(m){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+=`
`;break;case 114:t+="\r";break;case 116:t+="	";break;case 117:var g=A(4,!0);g>=0?t+=String.fromCharCode(g):d=4;break;default:d=5}k=e;continue}if(v>=0&&v<=31)if(S(v)){t+=r.substring(k,e),d=2;break}else d=6;e++}return t}function y(){if(o="",d=0,l=e,s=f,b=O,e>=a)return l=a,n=17;var t=r.charCodeAt(e);if(F(t)){do e++,o+=String.fromCharCode(t),t=r.charCodeAt(e);while(F(t));return n=15}if(S(t))return e++,o+=String.fromCharCode(t),t===13&&r.charCodeAt(e)===10&&(e++,o+=`
`),f++,O=e,n=14;switch(t){case 123:return e++,n=1;case 125:return e++,n=2;case 91:return e++,n=3;case 93:return e++,n=4;case 58:return e++,n=6;case 44:return e++,n=5;case 34:return e++,o=j(),n=10;case 47:var k=e-1;if(r.charCodeAt(e+1)===47){for(e+=2;e<a&&!S(r.charCodeAt(e));)e++;return o=r.substring(k,e),n=12}if(r.charCodeAt(e+1)===42){e+=2;for(var v=a-1,m=!1;e<v;){var g=r.charCodeAt(e);if(g===42&&r.charCodeAt(e+1)===47){e+=2,m=!0;break}e++,S(g)&&(g===13&&r.charCodeAt(e)===10&&e++,f++,O=e)}return m||(e++,d=1),o=r.substring(k,e),n=13}return o+=String.fromCharCode(t),e++,n=16;case 45:if(o+=String.fromCharCode(t),e++,e===a||!w(r.charCodeAt(e)))return n=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=D(),n=11;default:for(;e<a&&h(t);)e++,t=r.charCodeAt(e);if(l!==e){switch(o=r.substring(l,e),o){case"true":return n=8;case"false":return n=9;case"null":return n=7}return n=16}return o+=String.fromCharCode(t),e++,n=16}}function h(t){if(F(t)||S(t))return!1;switch(t){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function c(){var t;do t=y();while(t>=12&&t<=15);return t}return{setPosition:N,getPosition:function(){return e},scan:i?c:y,getToken:function(){return n},getTokenValue:function(){return o},getTokenOffset:function(){return l},getTokenLength:function(){return e-l},getTokenStartLine:function(){return s},getTokenStartCharacter:function(){return l-b},getTokenError:function(){return d}}}function F(r){return r===32||r===9||r===11||r===12||r===160||r===5760||r>=8192&&r<=8203||r===8239||r===8287||r===12288||r===65279}function S(r){return r===10||r===13||r===8232||r===8233}function w(r){return r>=48&&r<=57}var L;(function(r){r.DEFAULT={allowTrailingComma:!1}})(L||(L={}));function M(r,i,a){i===void 0&&(i=[]),a===void 0&&(a=L.DEFAULT);var e=null,o=[],l=[];function n(s){Array.isArray(o)?o.push(s):e!==null&&(o[e]=s)}var f={onObjectBegin:function(){var s={};n(s),l.push(o),o=s,e=null},onObjectProperty:function(s){e=s},onObjectEnd:function(){o=l.pop()},onArrayBegin:function(){var s=[];n(s),l.push(o),o=s,e=null},onArrayEnd:function(){o=l.pop()},onLiteralValue:n,onError:function(s,O,b){i.push({error:s,offset:O,length:b})}};return W(r,f,a),o[0]}function W(r,i,a){a===void 0&&(a=L.DEFAULT);var e=J(r,!1);function o(u){return u?function(){return u(e.getTokenOffset(),e.getTokenLength(),e.getTokenStartLine(),e.getTokenStartCharacter())}:function(){return!0}}function l(u){return u?function(C){return u(C,e.getTokenOffset(),e.getTokenLength(),e.getTokenStartLine(),e.getTokenStartCharacter())}:function(){return!0}}var n=o(i.onObjectBegin),f=l(i.onObjectProperty),s=o(i.onObjectEnd),O=o(i.onArrayBegin),b=o(i.onArrayEnd),d=l(i.onLiteralValue),A=l(i.onSeparator),N=o(i.onComment),D=l(i.onError),j=a&&a.disallowComments,y=a&&a.allowTrailingComma;function h(){for(;;){var u=e.scan();switch(e.getTokenError()){case 4:c(14);break;case 5:c(15);break;case 3:c(13);break;case 1:j||c(11);break;case 2:c(12);break;case 6:c(16);break}switch(u){case 12:case 13:j?c(10):N();break;case 16:c(1);break;case 15:case 14:break;default:return u}}}function c(u,C,_){if(C===void 0&&(C=[]),_===void 0&&(_=[]),D(u),C.length+_.length>0)for(var E=e.getToken();E!==17;){if(C.indexOf(E)!==-1){h();break}else if(_.indexOf(E)!==-1)break;E=h()}}function t(u){var C=e.getTokenValue();return u?d(C):f(C),h(),!0}function k(){switch(e.getToken()){case 11:var u=e.getTokenValue(),C=Number(u);isNaN(C)&&(c(2),C=0),d(C);break;case 7:d(null);break;case 8:d(!0);break;case 9:d(!1);break;default:return!1}return h(),!0}function v(){return e.getToken()!==10?(c(3,[],[2,5]),!1):(t(!1),e.getToken()===6?(A(":"),h(),V()||c(4,[],[2,5])):c(5,[],[2,5]),!0)}function m(){n(),h();for(var u=!1;e.getToken()!==2&&e.getToken()!==17;){if(e.getToken()===5){if(u||c(4,[],[]),A(","),h(),e.getToken()===2&&y)break}else u&&c(6,[],[]);v()||c(4,[],[2,5]),u=!0}return s(),e.getToken()!==2?c(7,[2],[]):h(),!0}function g(){O(),h();for(var u=!1;e.getToken()!==4&&e.getToken()!==17;){if(e.getToken()===5){if(u||c(4,[],[]),A(","),h(),e.getToken()===4&&y)break}else u&&c(6,[],[]);V()||c(4,[],[4,5]),u=!0}return b(),e.getToken()!==4?c(8,[4],[]):h(),!0}function V(){switch(e.getToken()){case 3:return g();case 1:return m();case 10:return t(!0);default:return k()}}return h(),e.getToken()===17?a.allowEmptyContent?!0:(c(4,[],[]),!1):V()?(e.getToken()!==17&&c(9,[],[]),!0):(c(4,[],[]),!1)}var G=M;const $=r=>P(/^[./]/.test(r)?r:`./${r}`);var K=Object.defineProperty,Q=Object.defineProperties,X=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,I=(r,i,a)=>i in r?K(r,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[i]=a,T=(r,i)=>{for(var a in i||(i={}))Y.call(i,a)&&I(r,a,i[a]);if(q)for(var a of q(i))Z.call(i,a)&&I(r,a,i[a]);return r},x=(r,i)=>Q(r,X(i));function R(r){var i,a;const e=B.realpathSync(r),o=p.dirname(e),l=B.readFileSync(r,"utf8").trim();let n={};if(l&&(n=G(l),!n||typeof n!="object"))throw new SyntaxError(`Failed to parse JSON: ${r}`);if(n.extends){let f=n.extends;try{f=U.resolve(f,{paths:[p.dirname(r)]})}catch(b){if(b.code==="MODULE_NOT_FOUND")try{f=U.resolve(p.join(f,"tsconfig.json"),{paths:[p.dirname(r)]})}catch{}}const s=R(f);if(delete s.references,(i=s.compilerOptions)!=null&&i.baseUrl){const{compilerOptions:b}=s;b.baseUrl=p.relative(o,p.join(p.dirname(f),b.baseUrl))}s.files&&(s.files=s.files.map(b=>p.relative(o,p.join(p.dirname(f),b)))),s.include&&(s.include=s.include.map(b=>p.relative(o,p.join(p.dirname(f),b)))),delete n.extends;const O=x(T(T({},s),n),{compilerOptions:T(T({},s.compilerOptions),n.compilerOptions)});s.watchOptions&&(O.watchOptions=T(T({},s.watchOptions),n.watchOptions)),n=O}if((a=n.compilerOptions)!=null&&a.baseUrl){const{compilerOptions:f}=n;f.baseUrl=$(f.baseUrl)}if(n.files&&(n.files=n.files.map($)),n.include&&(n.include=n.include.map(P)),n.watchOptions){const{watchOptions:f}=n;f.excludeDirectories&&(f.excludeDirectories=f.excludeDirectories.map(s=>P(p.resolve(o,s))))}return n}function ee(r=process.cwd(),i="tsconfig.json"){const a=H(r,i);if(!a)return null;const e=R(a);return{path:a,config:e}}export{ee as default};
